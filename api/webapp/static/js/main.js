const roundNumberActions={increment:()=>{let number=+formRoundsNumberElement.value;if(number<20){formRoundsNumberElement.value=++number}},decrement:()=>{let number=+formRoundsNumberElement.value;if(number>1){formRoundsNumberElement.value=--number}},};const encryptButton=document.querySelector(".js-btn-encrypt");const stringInputElement=document.querySelector(".js-string-input");const hashResultElement=document.querySelector(".js-hash-result");const checkingResultElement=document.querySelector(".js-checking-result");const checkButton=document.querySelector(".js-btn-check");const hashInputElement=document.querySelector(".js-hash-input");const stringToCheckInputElement=document.querySelector(".js-string-to-check-against");const formRoundsNumberElement=document.querySelector(".js-form__rounds-number");const formRoundsDivElement=document.querySelector(".js-form-rounds");formRoundsDivElement.addEventListener("click",(event)=>{hasDataAction=event.target.dataset.action;if(hasDataAction){if(hasDataAction==="increment"){roundNumberActions.increment()}else if(hasDataAction==="decrement"){roundNumberActions.decrement()}}});encryptButton.addEventListener("click",()=>{hashResultElement.innerText="Hashing...";get_hash_from_api(stringInputElement.value)});checkButton.addEventListener("click",()=>{hashValue=hashInputElement.value;if(hashValue){checkingResultElement.innerText="Checking...";check_with_api(hashValue,stringToCheckInputElement.value)}});async function get_hash_from_api(text){const response=await fetch("/encrypt",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",},body:JSON.stringify({string:text,rounds:formRoundsNumberElement.value,}),});const json=await response.json();hashResultElement.innerText=json.hash}
async function check_with_api(hashToCheck,textToCheck){const response=await fetch("/verify",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",},body:JSON.stringify({plain_string:textToCheck,hash_string:hashToCheck,}),});json=await response.json();checkingResultElement.innerText=json.response;if(json.response!="Match!"){checkingResultElement.classList.add("js-red-alert")}else{checkingResultElement.classList.remove("js-red-alert")}}
